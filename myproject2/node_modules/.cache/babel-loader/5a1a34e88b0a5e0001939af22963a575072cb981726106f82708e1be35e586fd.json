{"ast":null,"code":"import request from \"@/network/request\";\nimport router from \"@/router\";\n\n//取传入的路径上的参数\nfunction RequestParameter() {\n  var url = window.location.search; //获取url中\"?\"符后的字串\n  var theRequest = new Object();\n  if (url.indexOf(\"?\") != -1) {\n    var str = url.substr(1);\n    var strs = str.split(\"&\");\n    for (var i = 0; i < strs.length; i++) {\n      theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\n    }\n  }\n  return theRequest;\n}\nexport default {\n  name: \"clientModi\",\n  data() {\n    return {\n      client: {\n        ceid: \"\",\n        ceName: \"\",\n        phone: \"\",\n        psw: \"\"\n      }\n    };\n  },\n  mounted() {\n    var num = RequestParameter()[\"num\"];\n    console.log(num);\n\n    // var num= [[${num}]];\n    //根据客户ID获取信息\n    request.get('/api/Sys/v1/clients/ceid/' + num).then(res => {\n      console.log(res);\n      let data = res.data[0];\n      this.client.ceid = data.ceid;\n      this.client.ceName = data.ceName;\n      this.client.phone = data.phone;\n    });\n    layui.use('form', function () {\n      var form = layui.form;\n      //监听提交\n      form.on('submit(updateStu)', function (data) {\n        var updateJson = data.field;\n        updateJson.oldNum = num;\n        // updateJson.photo=imgpath;\n        data = JSON.stringify(updateJson);\n        // console.log(data)\n\n        request.put('/api/Sys/v1/clients', data\n        // updateJson\n        ).then(res => {\n          console.log(res);\n          if (res.msg === \"success\") {\n            layer.msg(\"修改成功！\", function () {});\n          }\n        }).catch(e => {\n          // console.log(e);\n          layer.msg(\"修改的客户ID已经存在，修改失败！\", function () {});\n        });\n      });\n    });\n  },\n  methods: {}\n};","map":{"version":3,"names":["request","router","RequestParameter","url","window","location","search","theRequest","Object","indexOf","str","substr","strs","split","i","length","name","data","client","ceid","ceName","phone","psw","mounted","num","console","log","get","then","res","layui","use","form","on","updateJson","field","oldNum","JSON","stringify","put","msg","layer","catch","e","methods"],"sources":["src/components/admin/userInfo/client/clientModi.vue"],"sourcesContent":["<template>\r\n    <div class=\"layui-unselect lau-sign-body\" style=\"padding-top: 0px\">\r\n    <form action=\"www.baidu.com\" class=\"layui-form\">\r\n\r\n        <div class=\"layui-form-item\" >\r\n            <div class=\"layui-inline\">\r\n                <label class=\"layui-form-label\" ><i class=\"iconfont layui-icon-extend-bianhao\" id=\"num\" >客户ID</i></label>\r\n                <div class=\"layui-input-block\">\r\n                <!--   不可编辑     -->\r\n                    <input  disabled=\"disabled\" style=\"background:#eeeeee\" type=\"text\" name=\"ceid\" id=\"ceid\"  v-model=\"client.ceid\" placeholder=\"请输入客户ID\" autocomplete=\"off\" class=\"layui-input\" >\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"layui-inline\">\r\n                <label class=\"layui-form-label\"><i class=\"iconfont layui-icon-extend-ziyuan\"></i>客户名称</label>\r\n                <div class=\"layui-input-block\">\r\n                    <input type=\"text\" name=\"ceName\" id=\"ceName\" v-model=\"client.ceName\" placeholder=\"请输入客户名称\" autocomplete=\"off\" class=\"layui-input\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"layui-form-item\">\r\n            <div class=\"layui-inline\">\r\n                <label class=\"layui-form-label\"><i class=\"layui-icon layui-icon-password\"></i>密码</label>\r\n                <div class=\"layui-input-block\">\r\n                    <input type=\"password\" name=\"psw\" id=\"psw\"  v-model=\"client.psw\" placeholder=\"请输入密码\" autocomplete=\"off\" class=\"layui-input\">\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class=\"layui-inline\">\r\n                <label class=\"layui-form-label\"><i class=\"iconfont layui-icon-extend-icon-test\"></i>手机号</label>\r\n                <div class=\"layui-input-block\">\r\n                    <input type=\"text\" name=\"phone\"  id=\"phone\"  v-model=\"client.phone\" placeholder=\"请输入手机号\" autocomplete=\"off\" class=\"layui-input\">\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n\r\n        <div class=\"layui-form-item lau-sign-other\" style=\"margin-top: 20px;text-align:center\">\r\n            <button type=\"button\" class=\"layui-btn layui-btn-normal\" lay-submit lay-filter=\"updateStu\" style=\"margin-right: 100px\">提&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;交</button>\r\n\r\n        </div>\r\n\r\n    </form>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import request from \"@/network/request\";\r\n    import router from \"@/router\";\r\n\r\n    //取传入的路径上的参数\r\n    function RequestParameter(){\r\n        var url = window.location.search; //获取url中\"?\"符后的字串\r\n        var theRequest = new Object();\r\n        if (url.indexOf(\"?\") != -1) {\r\n            var str = url.substr(1);\r\n            var strs = str.split(\"&\");\r\n            for(var i = 0; i < strs.length; i ++) {\r\n                theRequest[strs[i].split(\"=\")[0]]=(strs[i].split(\"=\")[1]);\r\n            }\r\n        }\r\n        return theRequest}\r\n\r\n    export default {\r\n        name: \"clientModi\",\r\n        data(){\r\n            return{\r\n                client:{\r\n                    ceid:\"\",\r\n                    ceName:\"\",\r\n                    phone:\"\",\r\n                    psw:\"\"\r\n                }\r\n\r\n            }\r\n        },\r\n        mounted() {\r\n\r\n            var num=RequestParameter()[\"num\"];\r\n            console.log(num)\r\n\r\n            // var num= [[${num}]];\r\n            //根据客户ID获取信息\r\n            request.get(\r\n                '/api/Sys/v1/clients/ceid/'+num,\r\n            ).then(res=>{\r\n                console.log(res)\r\n                let  data = res.data[0]\r\n                this.client.ceid=data.ceid\r\n                this.client.ceName = data.ceName\r\n                this.client.phone = data.phone\r\n            })\r\n\r\n\r\n            layui.use('form', function() {\r\n                var form = layui.form;\r\n                //监听提交\r\n                form.on('submit(updateStu)', function(data) {\r\n                    var updateJson= data.field;\r\n                    updateJson.oldNum = num;\r\n                    // updateJson.photo=imgpath;\r\n                    data=JSON.stringify(updateJson)\r\n                    // console.log(data)\r\n\r\n\r\n                    request.put(\r\n                        '/api/Sys/v1/clients',\r\n                        data\r\n                        // updateJson\r\n\r\n                    ).then(res=>{\r\n                        console.log(res)\r\n                        if(res.msg===\"success\"){\r\n                            layer.msg(\"修改成功！\",function(){\r\n\r\n                            });\r\n                        }\r\n                    }).catch(e=>{\r\n                        // console.log(e);\r\n                        layer.msg(\"修改的客户ID已经存在，修改失败！\",function(){\r\n\r\n                        });\r\n                    });\r\n\r\n\r\n\r\n                });\r\n            });\r\n        },\r\n        methods:{\r\n\r\n\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AAsDA,OAAAA,OAAA;AACA,OAAAC,MAAA;;AAEA;AACA,SAAAC,iBAAA;EACA,IAAAC,GAAA,GAAAC,MAAA,CAAAC,QAAA,CAAAC,MAAA;EACA,IAAAC,UAAA,OAAAC,MAAA;EACA,IAAAL,GAAA,CAAAM,OAAA;IACA,IAAAC,GAAA,GAAAP,GAAA,CAAAQ,MAAA;IACA,IAAAC,IAAA,GAAAF,GAAA,CAAAG,KAAA;IACA,SAAAC,CAAA,MAAAA,CAAA,GAAAF,IAAA,CAAAG,MAAA,EAAAD,CAAA;MACAP,UAAA,CAAAK,IAAA,CAAAE,CAAA,EAAAD,KAAA,YAAAD,IAAA,CAAAE,CAAA,EAAAD,KAAA;IACA;EACA;EACA,OAAAN,UAAA;AAAA;AAEA;EACAS,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;QACAC,IAAA;QACAC,MAAA;QACAC,KAAA;QACAC,GAAA;MACA;IAEA;EACA;EACAC,QAAA;IAEA,IAAAC,GAAA,GAAAtB,gBAAA;IACAuB,OAAA,CAAAC,GAAA,CAAAF,GAAA;;IAEA;IACA;IACAxB,OAAA,CAAA2B,GAAA,CACA,8BAAAH,GAAA,CACA,CAAAI,IAAA,CAAAC,GAAA;MACAJ,OAAA,CAAAC,GAAA,CAAAG,GAAA;MACA,IAAAZ,IAAA,GAAAY,GAAA,CAAAZ,IAAA;MACA,KAAAC,MAAA,CAAAC,IAAA,GAAAF,IAAA,CAAAE,IAAA;MACA,KAAAD,MAAA,CAAAE,MAAA,GAAAH,IAAA,CAAAG,MAAA;MACA,KAAAF,MAAA,CAAAG,KAAA,GAAAJ,IAAA,CAAAI,KAAA;IACA;IAGAS,KAAA,CAAAC,GAAA;MACA,IAAAC,IAAA,GAAAF,KAAA,CAAAE,IAAA;MACA;MACAA,IAAA,CAAAC,EAAA,gCAAAhB,IAAA;QACA,IAAAiB,UAAA,GAAAjB,IAAA,CAAAkB,KAAA;QACAD,UAAA,CAAAE,MAAA,GAAAZ,GAAA;QACA;QACAP,IAAA,GAAAoB,IAAA,CAAAC,SAAA,CAAAJ,UAAA;QACA;;QAGAlC,OAAA,CAAAuC,GAAA,CACA,uBACAtB;QACA;QAAA,CAEA,CAAAW,IAAA,CAAAC,GAAA;UACAJ,OAAA,CAAAC,GAAA,CAAAG,GAAA;UACA,IAAAA,GAAA,CAAAW,GAAA;YACAC,KAAA,CAAAD,GAAA,uBAEA;UACA;QACA,GAAAE,KAAA,CAAAC,CAAA;UACA;UACAF,KAAA,CAAAD,GAAA,mCAEA;QACA;MAIA;IACA;EACA;EACAI,OAAA,GAIA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
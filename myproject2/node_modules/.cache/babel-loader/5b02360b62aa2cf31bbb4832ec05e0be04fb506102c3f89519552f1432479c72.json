{"ast":null,"code":"import request from \"@/network/request\";\nimport router from \"@/router\";\nexport default {\n  name: \"companyInfo\",\n  mounted() {\n    layui.use('table', function () {\n      var table = layui.table;\n      table.render({\n        elem: '#test' //绑定table表格\n        ,\n        id: 'teaInfo',\n        method: 'get',\n        url: '/api/Sys//v1/companies/simple' //后台springmvc接收路径\n        ,\n        page: {\n          //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档\n          layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局\n          //,curr: 5 //设定初始在第 5 页\n          ,\n          groups: 1 //只显示 1 个连续页码\n          ,\n          first: false //不显示首页\n          ,\n          last: false //不显示尾页\n          ,\n          limit: 5,\n          limits: [5, 10, 15]\n        },\n        cols: [[{\n          type: 'checkbox',\n          fixed: 'left'\n        }, {\n          field: 'coid',\n          title: '承运商ID',\n          sort: true\n        }, {\n          field: 'coName',\n          title: '承运商名称'\n        }, {\n          field: 'phone',\n          title: '手机号'\n        }, {\n          field: 'operation',\n          title: '操作',\n          toolbar: '#barDemo',\n          fixed: 'right'\n        }]]\n      });\n\n      //根据名称查询\n      var $ = layui.$,\n        active = {\n          reload: function () {\n            var demoReload = $('#demoReload');\n            if (demoReload.val() === \"\") {\n              table.reload('teaInfo', {\n                page: {\n                  curr: 1 //重新从第 1 页开始\n                },\n\n                // url: '/api/Sys/v1/companies/coName/' + \" \"\n                url: '/api/Sys/v1/companies/simple' //后台springmvc接收路径\n                ,\n                method: 'get'\n              });\n            } else {\n              table.reload('teaInfo', {\n                page: {\n                  curr: 1 //重新从第 1 页开始\n                },\n\n                url: '/api/Sys/v1/companies/coName/' + demoReload.val(),\n                method: 'get'\n              });\n            }\n          }\n        };\n      $('.demoTable .layui-btn').on('click', function () {\n        var type = $(this).data('type');\n        active[type] ? active[type].call(this) : '';\n      });\n\n      /**/\n      //工具条事件\n      table.on('tool(test)', function (obj) {\n        //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter=\"对应的值\"\n        var data = obj.data; //获得当前行数据\n        var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\n        var tr = obj.tr; //获得当前行 tr 的 DOM 对象（如果有的话）\n        var coid = data.coid;\n        if (layEvent === 'del') {\n          //删除\n          layer.confirm('确定删除吗？', function (index) {\n            obj.del(); //删除对应行（tr）的DOM结构，并更新缓存\n            layer.close(index);\n            //\"/v1/companies/{coid}\"\n            //向服务端发送删除指令\n            request.delete('api/Sys/v1/companies/' + coid, {\n              params: {\n                'coid': coid\n              }\n            }).then(res => {\n              if (res.msg === \"success\") {\n                parent.layer.msg('删除成功！', {\n                  icon: 1,\n                  time: 2000,\n                  shade: 0.2\n                });\n                // location.reload(true);\n              } else {\n                parent.layer.msg('删除失败！', {\n                  icon: 2,\n                  time: 3000,\n                  shade: 0.2\n                });\n              }\n            });\n          });\n        } else if (layEvent === 'edit') {\n          //编辑\n          console.log(coid);\n\n          //do something\n          layer.open({\n            type: 2,\n            title: '修改承运商信息（若数据为空，则默认保留原来的值）',\n            skin: 'layui-layer-molv',\n            shadeClose: false,\n            shade: 0.8,\n            area: ['700px', '450px'],\n            // content: 'companyModi?coid='+coid,\n            content: 'coModi?coid=' + coid,\n            end: function () {\n              window.location.reload(); //刷新父页面\n            }\n          });\n        }\n      }); //工具条事件\n    });\n  },\n\n  methods: {\n    teaAdd() {\n      layer.open({\n        type: 2,\n        title: '新增承运商',\n        skin: 'layui-layer-lan',\n        shadeClose: false,\n        shade: 0.8,\n        area: ['700px', '450px'],\n        resize: true,\n        content: 'companyAdd',\n        end: function () {\n          window.location.reload(); //刷新父页面\n        }\n      });\n    },\n\n    teaDelAll(argument) {\n      layui.use('table', function () {\n        var table = layui.table;\n        var checkStatus = table.checkStatus('teaInfo');\n        if (checkStatus.data.length === 0) {\n          parent.layer.msg('请先选择要删除的数据行！', {\n            icon: 2\n          });\n          return;\n        }\n        var nums = \"\";\n        for (var i = 0; i < checkStatus.data.length; i++) {\n          nums += checkStatus.data[i].coid + \",\";\n        }\n        parent.layer.msg('删除中...', {\n          icon: 16,\n          shade: 0.3,\n          time: 5000\n        });\n        request.delete('/api/Sys/v1/companies', {\n          params: {\n            'nums': nums\n          }\n        }).then(res => {\n          if (res.msg === \"success\") {\n            parent.layer.msg('删除成功！', {\n              icon: 1,\n              time: 2000,\n              shade: 0.2\n            });\n            location.reload(true);\n          } else {\n            parent.layer.msg('删除失败！', {\n              icon: 2,\n              time: 3000,\n              shade: 0.2\n            });\n          }\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","router","name","mounted","layui","use","table","render","elem","id","method","url","page","layout","groups","first","last","limit","limits","cols","type","fixed","field","title","sort","toolbar","$","active","reload","demoReload","val","curr","on","data","call","obj","layEvent","event","tr","coid","layer","confirm","index","del","close","delete","params","then","res","msg","parent","icon","time","shade","console","log","open","skin","shadeClose","area","content","end","window","location","methods","teaAdd","resize","teaDelAll","argument","checkStatus","length","nums","i"],"sources":["src/components/admin/userInfo/company/companyInfo.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n    <div class=\"x-body\">\r\n        <div class=\"layui-row\">\r\n\r\n\r\n            <div class=\"demoTable\" style=\"margin-bottom: 20px\">\r\n                搜索承运商名称（模糊查询）：\r\n                <div class=\"layui-inline\">\r\n                    <input class=\"layui-input\" name=\"id\" id=\"demoReload\" autocomplete=\"off\">\r\n                </div>\r\n                <button class=\"layui-btn\" data-type=\"reload\" ><i class=\"layui-icon\">&#xe615;</i></button>\r\n\r\n                <a class=\"layui-btn layui-btn-small\" style=\"line-height:1.6em;margin-top:3px;float:right\" href=\"javascript:location.replace(location.href);\" title=\"刷新\">\r\n                    <i class=\"layui-icon\" style=\"line-height:30px\">ဂ</i>\r\n                </a>\r\n\r\n            </div>\r\n\r\n\r\n\r\n        </div>\r\n\r\n        <xblock >\r\n            <button class=\"layui-btn layui-btn-danger\" @click=\"teaDelAll\"><i class=\"layui-icon\"></i>批量删除</button>\r\n            <button class=\"layui-btn\" @click=\"teaAdd\"><i class=\"layui-icon\"></i>添加</button>\r\n        </xblock>\r\n\r\n        <table id=\"test\" lay-filter=\"test\">\r\n\r\n            <script type=\"text/html\"  id =\"barDemo\">\r\n                <a title=\"修改信息 \"   href=\"javascript:;\" lay-event=\"edit\" >\r\n                    <i class=\"layui-icon\">&#xe642;</i>\r\n                </a>\r\n                <a title=\"删除\"  href=\"javascript:;\" lay-event=\"del\">\r\n\r\n                    <i class=\"layui-icon\">&#xe640;</i>\r\n                </a>\r\n            </script>\r\n\r\n        </table>\r\n\r\n    </div>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n    import request from \"@/network/request\";\r\n    import router from \"@/router\"\r\n\r\n    export default {\r\n        name: \"companyInfo\",\r\n        mounted() {\r\n            layui.use('table', function(){\r\n                var table = layui.table;\r\n                table.render({\r\n                    elem: '#test'  //绑定table表格\r\n                    ,id:'teaInfo'\r\n                    ,method:'get'\r\n                    ,url: '/api/Sys//v1/companies/simple' //后台springmvc接收路径\r\n                    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档\r\n                        layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局\r\n                        //,curr: 5 //设定初始在第 5 页\r\n                        ,groups: 1 //只显示 1 个连续页码\r\n                        ,first: false //不显示首页\r\n                        ,last: false //不显示尾页\r\n                        ,limit:5\r\n\r\n                        ,limits:[5,10,15]\r\n                    }\r\n                    ,cols: [\r\n                        [\r\n                            {type: 'checkbox', fixed: 'left'}\r\n                            ,{field:'coid',title:'承运商ID',  sort: true}\r\n                            ,{field:'coName', title:'承运商名称'}\r\n                            ,{field:'phone', title:'手机号'}\r\n                            ,{field:'operation',title:'操作',toolbar: '#barDemo',fixed: 'right'}\r\n                        ]\r\n                    ]\r\n                });\r\n\r\n                //根据名称查询\r\n                var $ = layui.$, active = {\r\n                    reload: function(){\r\n                        var demoReload = $('#demoReload');\r\n\r\n                        if (demoReload.val()===\"\"){\r\n                            table.reload('teaInfo', {\r\n                                page: {\r\n                                    curr: 1 //重新从第 1 页开始\r\n                                },\r\n                                // url: '/api/Sys/v1/companies/coName/' + \" \"\r\n                                url: '/api/Sys/v1/companies/simple' //后台springmvc接收路径\r\n                                , method: 'get'\r\n                            });\r\n                        } else {\r\n                            table.reload('teaInfo', {\r\n                                page: {\r\n                                    curr: 1 //重新从第 1 页开始\r\n                                },\r\n                                url: '/api/Sys/v1/companies/coName/' + demoReload.val()\r\n\r\n                                , method: 'get'\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n\r\n                $('.demoTable .layui-btn').on('click', function(){\r\n                    var type = $(this).data('type');\r\n                    active[type] ? active[type].call(this) : '';\r\n                });\r\n\r\n\r\n\r\n                /**/\r\n                //工具条事件\r\n                table.on('tool(test)', function(obj){ //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter=\"对应的值\"\r\n                    var data = obj.data; //获得当前行数据\r\n                    var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）\r\n                    var tr = obj.tr; //获得当前行 tr 的 DOM 对象（如果有的话）\r\n                    var coid = data.coid\r\n\r\n                    if(layEvent === 'del'){ //删除\r\n                        layer.confirm('确定删除吗？', function(index){\r\n                            obj.del(); //删除对应行（tr）的DOM结构，并更新缓存\r\n                            layer.close(index);\r\n                            //\"/v1/companies/{coid}\"\r\n                            //向服务端发送删除指令\r\n                            request.delete(\r\n                                'api/Sys/v1/companies/'+coid,\r\n                                {\r\n                                    params:{\r\n                                        'coid':coid\r\n                                    }\r\n                                }\r\n                            ).then(res=>{\r\n                                if(res.msg===\"success\"){\r\n                                    parent.layer.msg('删除成功！', {icon: 1,time:2000,shade:0.2});\r\n                                    // location.reload(true);\r\n                                }else{\r\n                                    parent.layer.msg('删除失败！', {icon: 2,time:3000,shade:0.2});\r\n                                }\r\n                            })\r\n\r\n\r\n                        });\r\n                    } else if(layEvent === 'edit'){ //编辑\r\n                        console.log(coid)\r\n\r\n                        //do something\r\n                        layer.open({\r\n                            type: 2,\r\n                            title: '修改承运商信息（若数据为空，则默认保留原来的值）',\r\n                            skin: 'layui-layer-molv',\r\n                            shadeClose: false,\r\n                            shade: 0.8,\r\n                            area:  ['700px', '450px'],\r\n                            // content: 'companyModi?coid='+coid,\r\n                            content: 'coModi?coid='+coid,\r\n                            end: function(){\r\n                                window.location.reload(); //刷新父页面\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });//工具条事件\r\n\r\n            });\r\n\r\n        },\r\n        methods:{\r\n            teaAdd(){\r\n        layer.open(\r\n            {\r\n                type: 2,\r\n                title: '新增承运商',\r\n                skin: 'layui-layer-lan',\r\n                shadeClose: false,\r\n                shade: 0.8,\r\n                area:  ['700px', '450px'],\r\n                resize:true,\r\n                content:'companyAdd',\r\n                end: function(){\r\n                    window.location.reload(); //刷新父页面\r\n                }\r\n            });\r\n    },\r\n\r\n\r\n            teaDelAll (argument) {\r\n\r\n        layui.use('table',function(){\r\n            var table = layui.table\r\n            var checkStatus = table.checkStatus('teaInfo');\r\n            if(checkStatus.data.length===0){\r\n                parent.layer.msg('请先选择要删除的数据行！', {icon: 2});\r\n                return ;\r\n            }\r\n            var nums = \"\";\r\n            for(var i=0;i<checkStatus.data.length;i++){\r\n                nums += checkStatus.data[i].coid+\",\";\r\n            }\r\n            parent.layer.msg('删除中...', {icon: 16,shade: 0.3,time:5000});\r\n\r\n            request.delete(\r\n                '/api/Sys/v1/companies',\r\n                {params:{'nums':nums}},\r\n            ).then(res=>{\r\n                if(res.msg===\"success\"){\r\n                    parent.layer.msg('删除成功！', {icon: 1,time:2000,shade:0.2});\r\n                    location.reload(true);\r\n                }else{\r\n                    parent.layer.msg('删除失败！', {icon: 2,time:3000,shade:0.2});\r\n                }\r\n            })\r\n\r\n        });\r\n\r\n    }\r\n\r\n\r\n    }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
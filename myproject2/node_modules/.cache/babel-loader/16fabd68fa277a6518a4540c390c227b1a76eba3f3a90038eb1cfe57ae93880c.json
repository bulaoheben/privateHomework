{"ast":null,"code":"import Sidebar from \"../components/base/sidebar.vue\";\nimport axios from \"axios\";\nimport request from \"@/network/request\";\nexport default {\n  name: \"goodsSituation\",\n  components: {\n    Sidebar\n  },\n  mounted() {\n    this.id = this.$route.query.id;\n    let data = {\n      consignorId: this.id\n    };\n    var token = localStorage.getItem('token');\n    // axios.post('http://localhost:8181/order/search', data, {\n    //     headers: {'token': token}\n    // })\n    //     .then(response => {\n    //         // 处理返回信息\n    //         if (response.code == \"1\") {\n    //             this.orders = response.data;\n    //             for (var i = 0; i < response.data.length; i++) {\n    //                 this.orders[i].fromDate = this.orders[i].fromDate.slice(0, 10);\n    //             }\n    //         } else if (response.code == \"2\") {\n    //             alert(\"登录已过时，请重新登陆\");\n    //             window.location.replace(\"/\");\n    //         }\n    //         console.log(\"1111111111111\")\n    //         console.log(this.orders)\n    //     })\n    //     .catch(error => {\n    //         console.log(error);\n    //     });\n    request.post(\"/api/order/search\", data, {\n      headers: {\n        'token': token\n      }\n    }).then(response => {\n      // 处理返回信息\n      if (response.code == \"1\") {\n        this.orders = response.data;\n        for (var i = 0; i < response.data.length; i++) {\n          this.orders[i].fromDate = this.orders[i].fromDate.slice(0, 10);\n        }\n      } else if (response.code == \"2\") {\n        alert(\"登录已过时，请重新登陆\");\n        window.location.replace(\"/\");\n      }\n      console.log(\"1111111111111\");\n      console.log(this.orders);\n    }).catch(error => {\n      console.log(error);\n    });\n  },\n  data() {\n    return {\n      id: this.$route.query.id,\n      username: this.$route.query.username,\n      email: this.$route.query.email,\n      token: localStorage.getItem('token'),\n      orders: [{\n        destinationAddress: '',\n        name: '',\n        currentLocation: '',\n        departAddress: '',\n        quantity: 0,\n        weight: 0.0,\n        fromDate: '',\n        status: 'processing'\n      }],\n      fromdate: \" \",\n      todate: \" \",\n      detailTransport: []\n    };\n  },\n  methods: {\n    searchTransport(row, expandedRows) {\n      if (expandedRows.length > 0) {\n        let data = {\n          consignorId: this.id,\n          id: row.id\n        };\n        /*axios.post('http://localhost:8181/order/transport', data, {\r\n            headers: {'token': this.token}\r\n        })\r\n        .then(response => {\r\n            if (response.code==\"1\"){\r\n                this.detailTransport=response.data;\r\n                for(var i=0;i<this.detailTransport.length;i++){\r\n                    this.detailTransport[i].fromDate= this.detailTransport[i].fromDate.slice(0, 10);\r\n                }\r\n            }else if(response.code==\"2\"){\r\n                alert(\"登录已过时，请重新登陆\");\r\n                window.location.replace(\"/\");\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });*/\n        request.post(\"/api/order/transport\", data, {\n          headers: {\n            'token': token\n          }\n        }).then(response => {\n          console.log(response);\n          if (response.code == \"1\") {\n            this.detailTransport = response.data;\n            for (var i = 0; i < this.detailTransport.length; i++) {\n              this.detailTransport[i].fromDate = this.detailTransport[i].fromDate.slice(0, 10);\n            }\n          } else if (response.code == \"2\") {\n            alert(\"登录已过时，请重新登陆\");\n            window.location.replace(\"/\");\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        this.detailTransport = [];\n      }\n    }\n  }\n};","map":{"version":3,"names":["Sidebar","axios","request","name","components","mounted","id","$route","query","data","consignorId","token","localStorage","getItem","post","headers","then","response","code","orders","i","length","fromDate","slice","alert","window","location","replace","console","log","catch","error","username","email","destinationAddress","currentLocation","departAddress","quantity","weight","status","fromdate","todate","detailTransport","methods","searchTransport","row","expandedRows"],"sources":["src/views/goodsSituation.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <div style=\"display: flex;height: 100%\">\r\n                <sidebar style=\"height: 100%\"></sidebar>\r\n                <div>\r\n                    <el-card style=\"margin-left: 30px;margin-top: 30px;\">\r\n                        <el-table\r\n                                :data=\"orders\"\r\n                                border\r\n                                height=\"680px\"\r\n                                style=\"width: 100%;\"\r\n                                @expand-change=\"searchTransport\">\r\n\r\n                            <el-table-column type=\"expand\">\r\n                                <template slot-scope=\"scope\">\r\n                                    <div style=\"margin-top: 30px\">\r\n                                        <el-steps :space=\"40\" direction=\"vertical\" :active=detailTransport.length+2 style=\"margin-left: 30px\" finish-status=\"success\">\r\n                                            <el-step title=\"您已提交订单,请等待系统确认\" :description=scope.row.fromDate></el-step>\r\n                                            <el-step title=\"订单确认，已打包完成\" :description=scope.row.fromDate></el-step>\r\n                                            <el-step v-for=\"item in detailTransport\" :title=\"item.currentLocation!=null?\r\n                    '货件已到达'+item.currentLocation:\r\n                    '货件正在由'+item.departAddress+'运往'+item.destinationAddress\"\r\n                                                     :description=item.fromDate></el-step>\r\n                                        </el-steps>\r\n                                    </div>\r\n                                </template>\r\n                            </el-table-column>\r\n\r\n                            <el-table-column\r\n                                    prop=\"id\"\r\n                                    label=\"订单编号\"\r\n                                    width=\"120\">\r\n                            </el-table-column>\r\n\r\n                            <el-table-column\r\n                                    prop=\"name\"\r\n                                    label=\"货物名称\">\r\n                            </el-table-column>\r\n\r\n                            <el-table-column\r\n                                    prop=\"fromDate\"\r\n                                    label=\"寄出时间\"\r\n                                    width=\"180\">\r\n                            </el-table-column>\r\n\r\n                            <el-table-column\r\n                                    prop=\"departAddress\"\r\n                                    label=\"原寄地\"\r\n                                    width=\"340\">\r\n                            </el-table-column>\r\n\r\n                            <el-table-column\r\n                                    prop=\"destinationAddress\"\r\n                                    label=\"收件地址\"\r\n                                    width=\"340\">\r\n                            </el-table-column>\r\n\r\n                        </el-table>\r\n                    </el-card>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Sidebar from \"../components/base/sidebar.vue\";\r\nimport axios from \"axios\";\r\nimport request from \"@/network/request\";\r\n\r\nexport default {\r\n    name: \"goodsSituation\",\r\n    components: {Sidebar},\r\n    mounted() {\r\n        this.id = this.$route.query.id;\r\n        let data = {consignorId: this.id};\r\n        var token = localStorage.getItem('token')\r\n        // axios.post('http://localhost:8181/order/search', data, {\r\n        //     headers: {'token': token}\r\n        // })\r\n        //     .then(response => {\r\n        //         // 处理返回信息\r\n        //         if (response.code == \"1\") {\r\n        //             this.orders = response.data;\r\n        //             for (var i = 0; i < response.data.length; i++) {\r\n        //                 this.orders[i].fromDate = this.orders[i].fromDate.slice(0, 10);\r\n        //             }\r\n        //         } else if (response.code == \"2\") {\r\n        //             alert(\"登录已过时，请重新登陆\");\r\n        //             window.location.replace(\"/\");\r\n        //         }\r\n        //         console.log(\"1111111111111\")\r\n        //         console.log(this.orders)\r\n        //     })\r\n        //     .catch(error => {\r\n        //         console.log(error);\r\n        //     });\r\n        request.post(\r\n            \"/api/order/search\",\r\n            data,\r\n            {\r\n                headers: {'token':token}\r\n            }\r\n        ).then(response => {\r\n            // 处理返回信息\r\n            if (response.code == \"1\") {\r\n                this.orders = response.data;\r\n                for (var i = 0; i < response.data.length; i++) {\r\n                    this.orders[i].fromDate = this.orders[i].fromDate.slice(0, 10);\r\n                }\r\n            } else if (response.code == \"2\") {\r\n                alert(\"登录已过时，请重新登陆\");\r\n                window.location.replace(\"/\");\r\n            }\r\n            console.log(\"1111111111111\")\r\n            console.log(this.orders)\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        });\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            id: this.$route.query.id,\r\n            username: this.$route.query.username,\r\n            email: this.$route.query.email,\r\n            token: localStorage.getItem('token'),\r\n            orders: [\r\n                {\r\n                    destinationAddress: '',\r\n                    name: '',\r\n                    currentLocation: '',\r\n                    departAddress: '',\r\n                    quantity: 0,\r\n                    weight: 0.0,\r\n                    fromDate: '',\r\n                    status: 'processing',\r\n                },\r\n            ],\r\n            fromdate: \" \",\r\n            todate: \" \",\r\n            detailTransport:[],\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        searchTransport(row,expandedRows){\r\n            if(expandedRows.length>0){\r\n                let data = {\r\n                    consignorId: this.id,\r\n                    id: row.id\r\n                };\r\n                /*axios.post('http://localhost:8181/order/transport', data, {\r\n                    headers: {'token': this.token}\r\n                })\r\n                .then(response => {\r\n                    if (response.code==\"1\"){\r\n                        this.detailTransport=response.data;\r\n                        for(var i=0;i<this.detailTransport.length;i++){\r\n                            this.detailTransport[i].fromDate= this.detailTransport[i].fromDate.slice(0, 10);\r\n                        }\r\n                    }else if(response.code==\"2\"){\r\n                        alert(\"登录已过时，请重新登陆\");\r\n                        window.location.replace(\"/\");\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });*/\r\n                request.post(\r\n                    \"/api/order/transport\",\r\n                    data,\r\n                    {\r\n                        headers: {'token':token}\r\n                    }\r\n                ).then(response =>{\r\n                    console.log(response);\r\n                    if (response.code==\"1\"){\r\n                        this.detailTransport=response.data;\r\n                        for(var i=0;i<this.detailTransport.length;i++){\r\n                            this.detailTransport[i].fromDate= this.detailTransport[i].fromDate.slice(0, 10);\r\n                        }\r\n                    }else if(response.code==\"2\"){\r\n                        alert(\"登录已过时，请重新登陆\");\r\n                        window.location.replace(\"/\");\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n            }else{\r\n                this.detailTransport=[];\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.demo-table-expand {\r\n    font-size: 0;\r\n    margin-left: 30px;\r\n}\r\n.demo-table-expand label {\r\n    width: 90px;\r\n    color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    width: 50%;\r\n}\r\n</style>\r\n"],"mappings":"AAoEA,OAAAA,OAAA;AACA,OAAAC,KAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAJ;EAAA;EACAK,QAAA;IACA,KAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;IACA,IAAAG,IAAA;MAAAC,WAAA,OAAAJ;IAAA;IACA,IAAAK,KAAA,GAAAC,YAAA,CAAAC,OAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAX,OAAA,CAAAY,IAAA,CACA,qBACAL,IAAA,EACA;MACAM,OAAA;QAAA,SAAAJ;MAAA;IACA,EACA,CAAAK,IAAA,CAAAC,QAAA;MACA;MACA,IAAAA,QAAA,CAAAC,IAAA;QACA,KAAAC,MAAA,GAAAF,QAAA,CAAAR,IAAA;QACA,SAAAW,CAAA,MAAAA,CAAA,GAAAH,QAAA,CAAAR,IAAA,CAAAY,MAAA,EAAAD,CAAA;UACA,KAAAD,MAAA,CAAAC,CAAA,EAAAE,QAAA,QAAAH,MAAA,CAAAC,CAAA,EAAAE,QAAA,CAAAC,KAAA;QACA;MACA,WAAAN,QAAA,CAAAC,IAAA;QACAM,KAAA;QACAC,MAAA,CAAAC,QAAA,CAAAC,OAAA;MACA;MACAC,OAAA,CAAAC,GAAA;MACAD,OAAA,CAAAC,GAAA,MAAAV,MAAA;IACA,GACAW,KAAA,CAAAC,KAAA;MACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;IACA;EAEA;EACAtB,KAAA;IACA;MACAH,EAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,EAAA;MACA0B,QAAA,OAAAzB,MAAA,CAAAC,KAAA,CAAAwB,QAAA;MACAC,KAAA,OAAA1B,MAAA,CAAAC,KAAA,CAAAyB,KAAA;MACAtB,KAAA,EAAAC,YAAA,CAAAC,OAAA;MACAM,MAAA,GACA;QACAe,kBAAA;QACA/B,IAAA;QACAgC,eAAA;QACAC,aAAA;QACAC,QAAA;QACAC,MAAA;QACAhB,QAAA;QACAiB,MAAA;MACA,EACA;MACAC,QAAA;MACAC,MAAA;MACAC,eAAA;IACA;EACA;EAEAC,OAAA;IACAC,gBAAAC,GAAA,EAAAC,YAAA;MACA,IAAAA,YAAA,CAAAzB,MAAA;QACA,IAAAZ,IAAA;UACAC,WAAA,OAAAJ,EAAA;UACAA,EAAA,EAAAuC,GAAA,CAAAvC;QACA;QACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QACAJ,OAAA,CAAAY,IAAA,CACA,wBACAL,IAAA,EACA;UACAM,OAAA;YAAA,SAAAJ;UAAA;QACA,EACA,CAAAK,IAAA,CAAAC,QAAA;UACAW,OAAA,CAAAC,GAAA,CAAAZ,QAAA;UACA,IAAAA,QAAA,CAAAC,IAAA;YACA,KAAAwB,eAAA,GAAAzB,QAAA,CAAAR,IAAA;YACA,SAAAW,CAAA,MAAAA,CAAA,QAAAsB,eAAA,CAAArB,MAAA,EAAAD,CAAA;cACA,KAAAsB,eAAA,CAAAtB,CAAA,EAAAE,QAAA,QAAAoB,eAAA,CAAAtB,CAAA,EAAAE,QAAA,CAAAC,KAAA;YACA;UACA,WAAAN,QAAA,CAAAC,IAAA;YACAM,KAAA;YACAC,MAAA,CAAAC,QAAA,CAAAC,OAAA;UACA;QACA,GACAG,KAAA,CAAAC,KAAA;UACAH,OAAA,CAAAC,GAAA,CAAAE,KAAA;QACA;MACA;QACA,KAAAW,eAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}